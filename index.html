<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MUVN - Acceso Seguro</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-100 text-slate-800 min-h-screen">

    <div id="root"></div>

    <script type="text/babel">
        // ---------------------------------------------------------
        // 1. CONFIGURACI√ìN DE FIREBASE
        // ---------------------------------------------------------
        const firebaseConfig = {
            apiKey: "AIzaSyDmf2tlJYR7cP_vxv66tVozQDBFehURGXM",
            authDomain: "data-d064b.firebaseapp.com",
            projectId: "data-d064b",
            storageBucket: "data-d064b.firebasestorage.app",
            messagingSenderId: "15120958868",
            appId: "1:15120958868:web:ec1d059d08f631bb81fb81"
        };

        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const db = firebase.firestore();

        // ---------------------------------------------------------
        // 2. DATOS (PERSONAL Y PACIENTES)
        // ---------------------------------------------------------
        
        // Cuidadores con PIN de seguridad
        const CAREGIVERS = [
            { name: "Ana Mart√≠nez", pin: "1111", role: "Enfermera General" },
            { name: "Carlos Vel√°zquez", pin: "2222", role: "Cuidador Certificado" },
            { name: "Beatriz Sol√≠s", pin: "3333", role: "Auxiliar Geri√°trico" },
            { name: "David L√≥pez", pin: "4444", role: "Enfermero Intensivista" },
            { name: "Elena Ram√≠rez", pin: "5555", role: "Cuidadora Nocturna" },
            { name: "Dr. Fernando Ruiz", pin: "9999", role: "Supervisor M√©dico" }
        ];

        const PATIENTS = [
            {
                id: 'p1', 
                name: "Don Roberto", 
                condition: "Diabetes Mellitus T2 / Hipertensi√≥n",
                // Ficha T√©cnica
                info: {
                    age: "78 a√±os", weight: "82 kg", bloodType: "O+",
                    allergies: "Penicilina", doctor: "Dr. H. Gtz (555-0123)",
                    emergency: "Hijo: Luis (555-9876)",
                    diet: "Diab√©tica estricta (baja en sodio/az√∫car)"
                },
                tasks: {
                    dia: [ // Turno 12 horas AM
                        { id: 't_am_1', text: "07:00 - Toma de Glucosa en ayunas", type: "vital" },
                        { id: 't_am_2', text: "07:15 - Insulina NPH (seg√∫n esquema)", type: "med" },
                        { id: 't_am_3', text: "08:00 - Desayuno", type: "food" },
                        { id: 't_am_4', text: "09:00 - Losart√°n 50mg", type: "med" },
                        { id: 't_am_5', text: "11:00 - Colaci√≥n media ma√±ana", type: "food" },
                        { id: 't_am_6', text: "12:00 - Toma de Presi√≥n Arterial", type: "vital" },
                        { id: 't_am_7', text: "14:00 - Comida Principal", type: "food" },
                        { id: 't_am_8', text: "16:00 - Caminata asistida (15 min)", type: "physio" }
                    ],
                    noche: [ // Turno 12 horas PM
                        { id: 't_pm_1', text: "19:00 - Cena ligera", type: "food" },
                        { id: 't_pm_2', text: "20:00 - Toma de Glucosa post-pandrial", type: "vital" },
                        { id: 't_pm_3', text: "21:00 - Insulina Glargina", type: "med" },
                        { id: 't_pm_4', text: "22:00 - Aseo dental y cambio de pa√±al", type: "hygiene" },
                        { id: 't_pm_5', text: "00:00 - Ronda de sue√±o / Monitoreo", type: "check" },
                        { id: 't_pm_6', text: "04:00 - Cambio de posici√≥n (evitar √∫lceras)", type: "physio" }
                    ]
                }
            },
            {
                id: 'p2', 
                name: "Sra. Elena", 
                condition: "Post-Op Fractura de Cadera / EPOC",
                info: {
                    age: "84 a√±os", weight: "60 kg", bloodType: "A-",
                    allergies: "Ninguna conocida", doctor: "Dra. Salas (Trauma)",
                    emergency: "Hija: Clara (555-1122)",
                    diet: "Alta en fibra y prote√≠nas"
                },
                tasks: {
                    dia: [
                        { id: 'e_am_1', text: "08:00 - Nebulizaci√≥n (Combivent)", type: "med" },
                        { id: 'e_am_2', text: "09:00 - Ba√±o de esponja (cuidar herida)", type: "hygiene" },
                        { id: 'e_am_3', text: "10:00 - Curaci√≥n de herida quir√∫rgica", type: "cure" },
                        { id: 'e_am_4', text: "12:00 - Ejercicios respiratorios", type: "physio" },
                        { id: 'e_am_5', text: "14:00 - Medicamento para dolor (Tramadol)", type: "med" }
                    ],
                    noche: [
                        { id: 'e_pm_1', text: "20:00 - Ox√≠geno suplementario (2L/min)", type: "med" },
                        { id: 'e_pm_2', text: "22:00 - Revisi√≥n de saturaci√≥n O2", type: "vital" },
                        { id: 'e_pm_3', text: "23:00 - Colocar medias de compresi√≥n", type: "physio" }
                    ]
                }
            }
        ];

        // ---------------------------------------------------------
        // 3. ICONOS SVG
        // ---------------------------------------------------------
        const Icons = {
            Lock: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>,
            User: () => <svg className="w-12 h-12 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>,
            Check: () => <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"></polyline></svg>,
            File: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>,
            LogOut: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>,
            Whatsapp: () => <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.463 1.065 2.876 1.213 3.074.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/></svg>
        };

        // ---------------------------------------------------------
        // 4. COMPONENTES DE LA INTERFAZ
        // ---------------------------------------------------------

        // --- PANTALLA DE LOGIN ---
        function LoginScreen({ onLogin }) {
            const [selectedUser, setSelectedUser] = React.useState("");
            const [pin, setPin] = React.useState("");
            const [error, setError] = React.useState("");

            const handleAttempt = (e) => {
                e.preventDefault();
                const user = CAREGIVERS.find(c => c.name === selectedUser);
                if (user && user.pin === pin) {
                    onLogin(user);
                } else {
                    setError("PIN Incorrecto");
                    setPin("");
                }
            };

            return (
                <div className="flex flex-col items-center justify-center min-h-screen px-4 bg-gradient-to-br from-slate-200 to-slate-300">
                    <div className="bg-white p-8 rounded-2xl shadow-xl w-full max-w-md text-center fade-in">
                        <div className="mx-auto bg-blue-100 w-20 h-20 rounded-full flex items-center justify-center mb-4">
                            <Icons.User />
                        </div>
                        <h2 className="text-2xl font-bold text-slate-800 mb-1">Bienvenido a MUVN</h2>
                        <p className="text-sm text-slate-500 mb-6">Plataforma de Registro Cl√≠nico</p>

                        <form onSubmit={handleAttempt} className="space-y-4">
                            <div className="text-left">
                                <label className="block text-xs font-bold text-slate-600 uppercase mb-1">Seleccionar Personal</label>
                                <select 
                                    className="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition"
                                    value={selectedUser}
                                    onChange={(e) => {setSelectedUser(e.target.value); setError("");}}
                                >
                                    <option value="">-- Elige tu nombre --</option>
                                    {CAREGIVERS.map(c => <option key={c.pin} value={c.name}>{c.name}</option>)}
                                </select>
                            </div>

                            {selectedUser && (
                                <div className="text-left animate-fade-in">
                                    <label className="block text-xs font-bold text-slate-600 uppercase mb-1">Ingrese PIN (4 d√≠gitos)</label>
                                    <div className="relative">
                                        <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400">
                                            <Icons.Lock />
                                        </div>
                                        <input 
                                            type="password" 
                                            maxLength="4"
                                            className="w-full pl-10 p-3 bg-slate-50 border border-slate-200 rounded-lg text-center tracking-widest text-lg focus:ring-2 focus:ring-blue-500 outline-none"
                                            value={pin}
                                            onChange={(e) => setPin(e.target.value)}
                                            placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                                        />
                                    </div>
                                    {error && <p className="text-red-500 text-xs mt-2 text-center">{error}</p>}
                                </div>
                            )}

                            <button 
                                disabled={!selectedUser || pin.length < 4}
                                className="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all mt-4"
                            >
                                Ingresar al Turno
                            </button>
                        </form>
                    </div>
                </div>
            );
        }

        // --- FICHA T√âCNICA DEL PACIENTE ---
        function TechnicalSheet({ patient }) {
            const { info } = patient;
            return (
                <div className="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden mb-6">
                    <div className="bg-slate-800 text-white px-4 py-3 flex items-center gap-2">
                        <Icons.File />
                        <h3 className="font-bold">Ficha T√©cnica</h3>
                    </div>
                    <div className="p-4 grid grid-cols-2 gap-4 text-sm">
                        <div>
                            <span className="block text-slate-400 text-xs uppercase">Paciente</span>
                            <span className="font-bold text-slate-800 text-lg">{patient.name}</span>
                        </div>
                         <div>
                            <span className="block text-slate-400 text-xs uppercase">Diagn√≥stico</span>
                            <span className="font-semibold text-blue-600">{patient.condition}</span>
                        </div>
                        <div className="col-span-2 border-t pt-2 mt-2 grid grid-cols-2 gap-4">
                             <div>
                                <span className="block text-slate-400 text-xs">Edad / Peso</span>
                                <span className="font-medium">{info.age} - {info.weight}</span>
                            </div>
                            <div>
                                <span className="block text-slate-400 text-xs">Tipo Sangre</span>
                                <span className="font-medium">{info.bloodType}</span>
                            </div>
                            <div>
                                <span className="block text-slate-400 text-xs text-red-400">Alergias</span>
                                <span className="font-medium text-red-600">{info.allergies}</span>
                            </div>
                            <div>
                                <span className="block text-slate-400 text-xs">Emergencia</span>
                                <span className="font-medium">{info.emergency}</span>
                            </div>
                             <div className="col-span-2">
                                <span className="block text-slate-400 text-xs">M√©dico Tratante</span>
                                <span className="font-medium">{info.doctor}</span>
                            </div>
                             <div className="col-span-2 bg-yellow-50 p-2 rounded border border-yellow-100">
                                <span className="block text-yellow-600 text-xs font-bold">Dieta</span>
                                <span className="text-yellow-800">{info.diet}</span>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // --- DASHBOARD PRINCIPAL ---
        function Dashboard({ user, onLogout }) {
            const [selectedPatientId, setSelectedPatientId] = React.useState("");
            const [shift, setShift] = React.useState("dia"); // dia | noche
            const [records, setRecords] = React.useState({});
            const [generalObservation, setGeneralObservation] = React.useState("");
            const [status, setStatus] = React.useState("idle"); 

            // Fecha actual
            const getTodayStr = () => new Date().toISOString().split('T')[0];

            React.useEffect(() => {
                if(!selectedPatientId) return;

                const loadData = async () => {
                    setStatus("loading");
                    const dateStr = getTodayStr();
                    const docId = `${dateStr}_${shift}_${selectedPatientId}`;
                    try {
                        const docRef = db.collection("registros_diarios").doc(docId);
                        const docSnap = await docRef.get();
                        if (docSnap.exists) {
                            const data = docSnap.data();
                            setRecords(data.records || {});
                            setGeneralObservation(data.generalObservation || "");
                        } else {
                            setRecords({});
                            setGeneralObservation("");
                        }
                    } catch (e) { console.error(e); } finally { setStatus("idle"); }
                };
                loadData();
            }, [selectedPatientId, shift]);

            const saveData = async (newRecords, newObs) => {
                if(!selectedPatientId) return;
                const dateStr = getTodayStr();
                const docId = `${dateStr}_${shift}_${selectedPatientId}`;
                setStatus("saving");
                try {
                    await db.collection("registros_diarios").doc(docId).set({
                        date: dateStr,
                        shift: shift,
                        patientId: selectedPatientId,
                        caregiver: user.name,
                        lastUpdate: new Date(),
                        records: newRecords,
                        generalObservation: newObs
                    }, { merge: true });
                    setStatus("saved");
                    setTimeout(() => setStatus("idle"), 2000);
                } catch (e) { setStatus("error"); }
            };

            const toggleTask = (taskId, text) => {
                const now = new Date();
                const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                const current = records[taskId] || {};
                
                const updatedRec = current.checked 
                    ? { ...current, checked: false, completedAt: null }
                    : { ...current, checked: true, completedAt: timeString };

                const newRecords = { ...records, [taskId]: updatedRec };
                setRecords(newRecords);
                saveData(newRecords, generalObservation);
            };

            const handleNote = (taskId, note) => {
                const newRecords = {
                    ...records,
                    [taskId]: { ...(records[taskId] || {}), note: note }
                };
                setRecords(newRecords);
            };

            const handleSendWhatsapp = () => {
                const p = PATIENTS.find(pt => pt.id === selectedPatientId);
                const tasks = p.tasks[shift];
                
                let msg = `üè• *REPORTE DE TURNO - MUVN*\n`;
                msg += `üë§ Cuidador: ${user.name}\nüìÖ Fecha: ${getTodayStr()} | Turno: ${shift.toUpperCase()}\n`;
                msg += `üë¥ Paciente: ${p.name}\n\n`;
                msg += `*ACTIVIDADES REALIZADAS:*\n`;

                tasks.forEach(t => {
                    const rec = records[t.id];
                    if(rec && rec.checked) {
                        msg += `‚úÖ ${t.text} @ ${rec.completedAt}\n`;
                        if(rec.note) msg += `   üìù Nota: ${rec.note}\n`;
                    } else {
                        msg += `‚≠ï ${t.text} (Pendiente)\n`;
                    }
                });

                if(generalObservation) {
                    msg += `\n*OBSERVACIONES GENERALES:*\n${generalObservation}\n`;
                }

                window.open(`https://wa.me/524451586270?text=${encodeURIComponent(msg)}`, '_blank');
            };

            const currentPatient = PATIENTS.find(p => p.id === selectedPatientId);

            return (
                <div className="pb-24">
                    {/* Header */}
                    <header className="bg-white sticky top-0 z-20 shadow-sm border-b px-4 py-3 flex justify-between items-center">
                        <div>
                            <h1 className="font-bold text-slate-800">MUVN</h1>
                            <p className="text-xs text-slate-500">Hola, {user.name.split(' ')[0]}</p>
                        </div>
                        <div className="flex gap-2">
                             {status === 'saving' && <span className="text-xs bg-yellow-100 text-yellow-700 px-2 py-1 rounded animate-pulse">Guardando...</span>}
                             {status === 'saved' && <span className="text-xs bg-green-100 text-green-700 px-2 py-1 rounded">Guardado</span>}
                            <button onClick={onLogout} className="p-2 bg-slate-100 rounded-full text-slate-600 hover:bg-slate-200"><Icons.LogOut /></button>
                        </div>
                    </header>

                    {/* Selector Inicial (si no hay paciente seleccionado) */}
                    {!selectedPatientId ? (
                        <div className="p-4 fade-in">
                            <h2 className="text-lg font-bold mb-4">Configurar Turno</h2>
                            
                            <label className="block text-sm font-semibold mb-2 text-slate-600">Selecciona Turno</label>
                            <div className="grid grid-cols-2 gap-3 mb-6">
                                <button onClick={() => setShift('dia')} className={`p-4 rounded-xl border-2 font-bold ${shift === 'dia' ? 'border-orange-400 bg-orange-50 text-orange-700' : 'border-slate-200 bg-white'}`}>‚òÄÔ∏è D√≠a (12h)</button>
                                <button onClick={() => setShift('noche')} className={`p-4 rounded-xl border-2 font-bold ${shift === 'noche' ? 'border-indigo-500 bg-indigo-50 text-indigo-700' : 'border-slate-200 bg-white'}`}>üåô Noche (12h)</button>
                            </div>

                            <label className="block text-sm font-semibold mb-2 text-slate-600">Selecciona Paciente</label>
                            <div className="space-y-3">
                                {PATIENTS.map(p => (
                                    <button 
                                        key={p.id} 
                                        onClick={() => setSelectedPatientId(p.id)}
                                        className="w-full text-left p-4 bg-white rounded-xl shadow-sm border border-slate-200 hover:border-blue-400 transition flex justify-between items-center"
                                    >
                                        <div>
                                            <div className="font-bold text-lg">{p.name}</div>
                                            <div className="text-xs text-slate-500">{p.condition}</div>
                                        </div>
                                        <div className="text-blue-500">‚ûú</div>
                                    </button>
                                ))}
                            </div>
                        </div>
                    ) : (
                        // VISTA DEL TURNO ACTIVO
                        <div className="p-4 max-w-2xl mx-auto fade-in">
                            <button onClick={() => setSelectedPatientId("")} className="text-sm text-blue-600 mb-4 flex items-center gap-1">
                                ‚Üê Cambiar Paciente
                            </button>
                            
                            {/* Ficha T√©cnica */}
                            <TechnicalSheet patient={currentPatient} />

                            {/* Lista de Tareas */}
                            <div className="mb-6">
                                <h3 className="font-bold text-lg mb-3 flex items-center gap-2">
                                    {shift === 'dia' ? '‚òÄÔ∏è Tareas Turno Matutino' : 'üåô Tareas Turno Nocturno'}
                                </h3>
                                <div className="space-y-3">
                                    {currentPatient.tasks[shift].map(task => {
                                        const rec = records[task.id] || {};
                                        return (
                                            <div key={task.id} className={`p-3 rounded-lg border transition-all ${rec.checked ? 'bg-green-50 border-green-200' : 'bg-white border-slate-200 shadow-sm'}`}>
                                                <div className="flex items-start gap-3">
                                                    <div className="pt-1">
                                                        <input 
                                                            type="checkbox" 
                                                            checked={rec.checked || false} 
                                                            onChange={() => toggleTask(task.id, task.text)}
                                                            className="w-6 h-6 text-blue-600 rounded focus:ring-blue-500 cursor-pointer"
                                                        />
                                                    </div>
                                                    <div className="flex-1">
                                                        <span className={`text-sm font-medium ${rec.checked ? 'text-slate-500 line-through' : 'text-slate-800'}`}>
                                                            {task.text}
                                                        </span>
                                                        {rec.checked && <div className="text-xs text-green-600 font-bold mt-1">Realizado a las {rec.completedAt}</div>}
                                                        
                                                        <input 
                                                            type="text" 
                                                            placeholder="Agregar nota r√°pida..." 
                                                            className="mt-2 w-full text-xs p-2 bg-slate-50 border border-slate-200 rounded focus:outline-none focus:border-blue-300"
                                                            value={rec.note || ""}
                                                            onChange={(e) => handleNote(task.id, e.target.value)}
                                                            onBlur={() => saveData(records, generalObservation)}
                                                        />
                                                    </div>
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>
                            </div>

                            {/* Observaciones Generales */}
                            <div className="bg-white p-4 rounded-xl shadow-sm border border-slate-200 mb-20">
                                <h3 className="font-bold mb-2 text-sm uppercase text-slate-500">Observaciones Generales y Sugerencias</h3>
                                <textarea 
                                    className="w-full p-3 bg-slate-50 rounded-lg border border-slate-200 text-sm focus:ring-2 focus:ring-blue-500 outline-none"
                                    rows="4"
                                    placeholder="Escribe aqu√≠ cualquier eventualidad del turno..."
                                    value={generalObservation}
                                    onChange={(e) => setGeneralObservation(e.target.value)}
                                    onBlur={() => saveData(records, generalObservation)}
                                ></textarea>
                            </div>

                            {/* Bot√≥n Flotante WhatsApp */}
                            <div className="fixed bottom-0 left-0 w-full p-4 bg-white/90 backdrop-blur border-t border-slate-200">
                                <button 
                                    onClick={handleSendWhatsapp}
                                    className="w-full bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-3 rounded-xl shadow-lg flex items-center justify-center gap-2 transition"
                                >
                                    <Icons.Whatsapp /> Enviar Reporte Final
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        // --- APP PRINCIPAL ---
        function App() {
            const [user, setUser] = React.useState(null);

            // Verificar si hay sesi√≥n guardada (opcional, para simplicidad iniciamos siempre en login)
            // Para demo:
            const handleLogin = (loggedUser) => {
                setUser(loggedUser);
            };

            const handleLogout = () => {
                setUser(null);
            };

            return (
                <div className="max-w-md mx-auto min-h-screen bg-slate-50 shadow-2xl overflow-hidden relative">
                    {!user ? (
                        <LoginScreen onLogin={handleLogin} />
                    ) : (
                        <Dashboard user={user} onLogout={handleLogout} />
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
